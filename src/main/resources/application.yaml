spring:
  cache:
    type: redis
  data:
    redis:
      host: localhost
      port: 6379
      timeout: 60s
  application:
    name: news-aggregator
  threads:
    virtual:
      enabled: true
  mvc:
    apiversion:
      use:
        header: X-API-VERSION
      default: "1.0"

news:
  api:
    key: ${NEWS_API_KEY:none}

logging:
  level:
    root: debug
  pattern:
    level: '%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]'

management:
  endpoints:
    web:
      exposure:
        include: health, info, metrics, prometheus
  otlp:
    metrics:
      export:
        enabled: false
  tracing:
    sampling:
      probability: 1.0
    export:
      zipkin:
        endpoint: http://localhost:9411/api/v2/spans
      otlp:
        enabled: true

resilience4j:
  circuitbreaker:
    instances:
      news-api:
        register-health-indicator: true
        sliding-window-size: 5
        failure-rate-threshold: 50
        wait-duration-in-open-state:
          seconds: 10
        permitted-number-of-calls-in-half-open-state: 3
        automatic-transition-from-open-to-half-open-enabled: true
